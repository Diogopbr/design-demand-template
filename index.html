<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Template Automatizado ‚Äî Solicita√ß√£o de Design e V√≠deo (Discord)</title>
  <style>
    :root{--bg:#0f1115;--fg:#e6e9ef;--muted:#9aa4b2;--card:#151821;--accent:#ea8e1e;--ok:#22c55e;--danger:#ef4444;--border:#232736;--mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;} 
    html,body{background:var(--bg);color:var(--fg);margin:0;font:14px/1.5 Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji","Segoe UI Emoji";}  
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    .chip{display:inline-flex;align-items:center;gap:8px;background:#141926;border:1px solid #2a3245;border-radius:999px;padding:6px 10px;font-size:12px}
    .title{display:flex;align-items:center;gap:10px;margin:6px 0 18px}
    .head{display:flex;justify-content:space-between;align-items:center}
    h1{font-size:20px;margin:0}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .onecol{grid-template-columns:1fr}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px}
    label{display:block;font-weight:600;margin-bottom:6px;color:#cdd6e3}
    .req:after{content:" *";color:var(--accent);}
    input,textarea,select{width:100%;box-sizing:border-box;border:1px solid var(--border);background:#0c0f15;color:var(--fg);border-radius:10px;padding:10px;font-size:13px}
    textarea{min-height:70px;resize:vertical}
    .mono{font-family:var(--mono);}
    .row{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .btns{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
    button{background:var(--accent);border:0;color:#111;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    button.secondary{background:#222736;color:#d6d9e0;border:1px solid var(--border)}
    button.good{background:var(--ok);color:#0b140d}
    button.bad{background:var(--danger)}
    .output{background:#0a0d12;border:1px dashed #2a3245;border-radius:14px;padding:14px;margin-top:16px}
    pre{white-space:pre-wrap;word-wrap:break-word;margin:0;font-family:var(--mono);font-size:13px}
    .hint{color:var(--muted);font-size:12px}
    .footer{opacity:.8;margin-top:12px;font-size:12px;color:#a3adbd}
    .tabs{display:flex;gap:8px;margin:8px 0}
    .tab{flex:0 0 auto;padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:#141926;cursor:pointer}
    .tab.active{border-color:var(--accent);box-shadow:0 0 0 1px rgba(234,142,30,.25) inset}
    .hidden{display:none}
    .error{border-color:var(--danger)!important;}
    .toast{position:fixed;right:16px;bottom:16px;background:#141926;border:1px solid #2a3245;border-left:4px solid var(--accent);padding:12px 14px;border-radius:12px;color:#dbe1ec;box-shadow:0 8px 30px rgba(0,0,0,.35);opacity:0;transform:translateY(8px);transition:all .25s ease}
    .toast.show{opacity:1;transform:translateY(0)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">
      <span class="chip">üéõÔ∏è Toggle Design/V√≠deo</span>
      <span class="chip">üß≤ Op√ß√µes pr√©-definidas</span>
      <span class="chip">‚úÖ Valida√ß√£o</span>
    </div>

    <div class="head">
      <h1>Template Automatizado ‚Äî Solicita√ß√£o de Design e V√≠deo (Discord)</h1>
      <div class="btns">
        <button class="secondary" id="fillExample" title="Preencher com um exemplo">Preencher exemplo</button>
        <button class="secondary" id="clearAll" title="Limpar todos os campos">Limpar</button>
        <button class="secondary" id="runTests" title="Executar testes automatizados">Rodar Testes</button>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <label for="titulo" class="req">1) T√≠tulo da Demanda</label>
        <input id="titulo" placeholder="Ex.: Banner para tela de login do servidor" />
      </div>
      <div class="card">
        <label for="objetivo" class="req">2) Objetivo</label>
        <textarea id="objetivo" placeholder="O que o design/v√≠deo deve transmitir?"></textarea>
      </div>

      <div class="card">
        <label for="onde" class="req">Onde ser√° usado</label>
        <input id="onde" placeholder="Ex.: P√°gina inicial, redes sociais, HUD no jogo, trailer no Discord" />
      </div>
      <div class="card">
        <label for="publico" class="req">P√∫blico-alvo</label>
        <input id="publico" placeholder="Ex.: Jogadores, administradores, visitantes, investidores" />
      </div>

      <div class="card">
        <label>3) Selecione o tipo</label>
        <div class="tabs">
          <button type="button" class="tab active" data-tab="design">üé® Design</button>
          <button type="button" class="tab" data-tab="video">üé¨ V√≠deo</button>
          <button type="button" class="tab" data-tab="ambos">üß© Ambos</button>
        </div>
        <div class="hint">Escolha para mostrar apenas os campos relevantes.</div>
      </div>

      <!-- DESIGN SPECS -->
      <div class="card spec spec-design">
        <label>3) Especifica√ß√µes ‚Äî Design</label>
        <div class="row">
          <select id="dimPreset">
            <option value="">Tamanho (preset)</option>
            <option>1920x1080px</option>
            <option>1080x1080px</option>
            <option>1080x1920px</option>
            <option>1280x720px</option>
            <option>291x67px</option>
          </select>
          <select id="formatoPreset">
            <option value="">Formato</option>
            <option>PNG</option>
            <option>JPG</option>
            <option>SVG</option>
          </select>
          <select id="dpiPreset">
            <option value="">Resolu√ß√£o</option>
            <option>72 DPI</option>
            <option>300 DPI</option>
          </select>
        </div>
        <div class="row" style="margin-top:10px;">
          <input id="peso" placeholder="Peso m√°x. ‚Äî ex.: < 2MB" />
          <input id="dim" placeholder="Tamanho custom (px)" />
          <span></span>
        </div>
      </div>

      <!-- VIDEO SPECS -->
      <div class="card spec spec-video hidden">
        <label>3) Especifica√ß√µes ‚Äî V√≠deo</label>
        <div class="row">
          <select id="vres">
            <option value="">Resolu√ß√£o</option>
            <option>1920x1080</option>
            <option>1080x1920</option>
            <option>2560x1440</option>
            <option>3840x2160 (4K)</option>
          </select>
          <select id="vformato">
            <option value="">Formato</option>
            <option>MP4</option>
            <option>MOV</option>
            <option>WEBM</option>
          </select>
          <select id="vorient">
            <option value="">Orienta√ß√£o</option>
            <option>Horizontal</option>
            <option>Vertical</option>
            <option>Quadrado</option>
          </select>
        </div>
        <div class="row" style="margin-top:10px;">
          <select id="vdur">
            <option value="">Dura√ß√£o</option>
            <option>15s</option>
            <option>30s</option>
            <option>45s</option>
            <option>1min</option>
            <option>2min</option>
          </select>
          <select id="vfreq">
            <option value="">Frequ√™ncia</option>
            <option>V√≠deo √∫nico</option>
            <option>Vinheta semanal</option>
            <option>S√©rie de epis√≥dios</option>
          </select>
          <span></span>
        </div>
      </div>

      <div class="card">
        <label for="paleta">4) Paleta & Identidade Visual</label>
        <textarea id="paleta" placeholder="Cores (hex), fontes, estilo... Ex.: #000000, #FFFFFF, #EA8E1E | Montserrat | clean + neon sutil"></textarea>
        <div class="hint">Dica: se j√° tiver guia de marca, cole os pontos essenciais aqui.</div>
      </div>
      <div class="card">
        <label for="refs">5) Refer√™ncias (descri√ß√£o)</label>
        <textarea id="refs" placeholder="Ex.: Minimalista como menus do GTA V; cortes r√°pidos como trailers da Rockstar"></textarea>
        <label for="links" style="margin-top:10px">Links (1 por linha)</label>
        <textarea id="links" class="mono" placeholder="https://...\nhttps://..."></textarea>
      </div>

      <div class="card">
        <label for="textoDesign">6) Texto ‚Äî Design</label>
        <textarea id="textoDesign" placeholder="Frase exata para a arte"></textarea>
      </div>
      <div class="card">
        <label for="textoVideo">6) Roteiro ‚Äî V√≠deo</label>
        <textarea id="textoVideo" placeholder="Descri√ß√£o do roteiro ou texto base"></textarea>
      </div>

      <div class="card">
        <label class="req">7) Prazos</label>
        <div class="row">
          <input id="prazo1" type="date" />
          <input id="prazo2" type="date" />
          <span></span>
        </div>
      </div>
      <div class="card">
        <label class="req">8) Contato para D√∫vidas</label>
        <div class="row">
          <input id="resp" placeholder="Respons√°vel ‚Äî Ex.: Diogo" />
          <input id="discord" placeholder="Discord ‚Äî Ex.: @Diogopbr" />
          <span></span>
        </div>
      </div>
    </div>

    <div class="btns">
      <button id="generate" class="good">Gerar Markdown</button>
      <button id="copy" class="secondary">Copiar</button>
    </div>

    <div class="output card">
      <label>Sa√≠da (Markdown para colar no Discord)</label>
      <pre id="out" class="mono">Preencha os campos e clique em ‚ÄúGerar Markdown‚Äù.</pre>
    </div>

    <div class="output card" id="testsBox">
      <label>Resultados dos Testes</label>
      <pre id="testout" class="mono">Clique em "Rodar Testes" para validar.</pre>
    </div>

    <div class="footer">Feito para agilizar as demandas do servidor. Paleta: preto/branco + destaque <b>#EA8E1E</b>. ‚ú®</div>
  </div>

  <div class="toast" id="toast">Preencha os campos obrigat√≥rios marcados com *</div>

  <script>
  // Aguarda DOM pronto para evitar race no GitHub Pages
  window.addEventListener('DOMContentLoaded', function(){
    try {
      const $ = function(id){ return document.getElementById(id); };
      const nl = function(s){ return (s||'').toString().trim(); };
      // Compat√≠vel com Windows/Mac/Linux (\r? para CRLF)
      const lines = function(s){ return nl(s).split(/\r?\n/).filter(Boolean); };

      // -------- UI refs --------
      const tabs = document.querySelectorAll('.tab');
      const specDesign = document.querySelector('.spec-design');
      const specVideo = document.querySelector('.spec-video');
      let activeTab = 'design';

      // Protege listeners caso os elementos n√£o existam
      if(tabs && tabs.length){
        tabs.forEach(function(t){
          t.addEventListener('click', function(){
            tabs.forEach(function(x){ x.classList.remove('active'); });
            t.classList.add('active');
            activeTab = t.dataset.tab;
            if(specDesign) specDesign.classList.toggle('hidden', activeTab==='video');
            if(specVideo) specVideo.classList.toggle('hidden', activeTab==='design');
          });
        });
      }

      function showToast(msg){
        var toast = $("toast");
        if(!toast) return;
        toast.textContent = msg;
        toast.classList.add('show');
        setTimeout(function(){ toast.classList.remove('show'); }, 2200);
      }

      function mark(el, cond){
        if(!el) return false;
        if(cond){ el.classList.add('error'); return true; }
        el.classList.remove('error');
        return false;
      }

      function validate(){
        var errs = [];
        var v = function(id){ var el=$(id); return el ? nl(el.value) : ''; };

        errs.push(mark($("titulo"), !v('titulo')));
        errs.push(mark($("objetivo"), !v('objetivo')));
        errs.push(mark($("onde"), !v('onde')));
        errs.push(mark($("publico"), !v('publico')));

        // Prazos e contato
        errs.push(mark($("prazo1"), !v('prazo1')));
        errs.push(mark($("prazo2"), !v('prazo2')));
        errs.push(mark($("resp"), !v('resp')));
        errs.push(mark($("discord"), !v('discord')));

        // Regras por tipo
        if(activeTab === 'design' || activeTab === 'ambos'){
          var hasDesign = nl($("dimPreset") && $("dimPreset").value) || nl($("dim") && $("dim").value) || nl($("formatoPreset") && $("formatoPreset").value) || nl($("dpiPreset") && $("dpiPreset").value);
          if(!hasDesign){
            ["dimPreset","formatoPreset","dpiPreset","dim"].forEach(function(id){ var el=$(id); if(el) mark(el, true); });
          } else {
            ["dimPreset","formatoPreset","dpiPreset","dim"].forEach(function(id){ var el=$(id); if(el) mark(el, false); });
          }
          errs.push(!hasDesign);
        }
        if(activeTab === 'video' || activeTab === 'ambos'){
          var hasVideo = nl($("vres") && $("vres").value) || nl($("vformato") && $("vformato").value) || nl($("vorient") && $("vorient").value) || nl($("vdur") && $("vdur").value);
          if(!hasVideo){
            ["vres","vformato","vorient","vdur"].forEach(function(id){ var el=$(id); if(el) mark(el, true); });
          } else {
            ["vres","vformato","vorient","vdur"].forEach(function(id){ var el=$(id); if(el) mark(el, false); });
          }
          errs.push(!hasVideo);
        }

        var anyErr = errs.some(function(x){ return !!x; });
        if(anyErr) showToast('Preencha os campos obrigat√≥rios marcados com * ou selecione presets.');
        return !anyErr;
      }

      function md() {
        var titulo = nl($("titulo") && $("titulo").value) || "[Digite aqui o t√≠tulo objetivo e descritivo]";
        var objetivo = nl($("objetivo") && $("objetivo").value) || "[Descreva o que o design/v√≠deo deve transmitir]";
        var onde = nl($("onde") && $("onde").value) || "[Ex.: p√°gina inicial, redes sociais, HUD no jogo, trailer no Discord, etc.]";
        var publico = nl($("publico") && $("publico").value) || "[Jogadores, administradores, visitantes, investidores, etc.]";

        // Design
        var dim = nl($("dim") && $("dim").value) || nl($("dimPreset") && $("dimPreset").value) || "[ex.: 1920x1080px]";
        var formato = nl($("formatoPreset") && $("formatoPreset").value) || "[PNG, JPG, SVG...]";
        var dpi = nl($("dpiPreset") && $("dpiPreset").value) || "[72 DPI digital / 300 DPI impress√£o]";
        var peso = nl($("peso") && $("peso").value) || "[ex.: < 2MB]";

        // V√≠deo
        var vres = nl($("vres") && $("vres").value) || "[ex.: 1920x1080, 4K]";
        var vformato = nl($("vformato") && $("vformato").value) || "[MP4, MOV...]";
        var vdur = nl($("vdur") && $("vdur").value) || "[ex.: at√© 30s, 1min]";
        var vorient = nl($("vorient") && $("vorient").value) || "[Horizontal, Vertical, Quadrado]";
        var vfreq = nl($("vfreq") && $("vfreq").value) || "[V√≠deo √∫nico, vinheta semanal...]";

        var paleta = nl($("paleta") && $("paleta").value) || "[C√≥digos hex, fontes, estilo]";
        var refs = nl($("refs") && $("refs").value);
        var linkList = lines($("links") && $("links").value);

        var textoDesign = nl($("textoDesign") && $("textoDesign").value) || "[Frase para o banner]";
        var textoVideo = nl($("textoVideo") && $("textoVideo").value) || "[Descri√ß√£o do roteiro ou texto base]";

        var prazo1 = ($("prazo1") && $("prazo1").value) ? new Date($("prazo1").value).toLocaleDateString('pt-BR') : "[DATA]";
        var prazo2 = ($("prazo2") && $("prazo2").value) ? new Date($("prazo2").value).toLocaleDateString('pt-BR') : "[DATA]";

        var resp = nl($("resp") && $("resp").value) || "[Nome]";
        var discord = nl($("discord") && $("discord").value) || "[@Usu√°rioDiscord]";

        var linksMd = (linkList.length
          ? linkList.map(function(l){ return '  - [link](' + l + ')'; }).join("\n")
          : "  - [link 1]()\n  - [link 2]()");

        var blockDesign = (activeTab !== 'video') ? (
"üé® **Para Design:**\n"+
"- **Tamanho:** `"+dim+"`\n"+
"- **Formato do arquivo:** `"+formato+"`\n"+
"- **Resolu√ß√£o m√≠nima:** `"+dpi+"`\n"+
"- **Peso m√°ximo:** `"+peso+"`\n\n"
        ) : '';
        var blockVideo = (activeTab !== 'design') ? (
"üé¨ **Para V√≠deo:**\n"+
"- **Resolu√ß√£o:** `"+vres+"`\n"+
"- **Formato:** `"+vformato+"`\n"+
"- **Dura√ß√£o:** `"+vdur+"`\n"+
"- **Orienta√ß√£o:** `"+vorient+"`\n"+
"- **Frequ√™ncia:** `"+vfreq+"`\n\n"
        ) : '';

        return "**üé® Padr√£o para Solicita√ß√£o de Demandas de Design e Video Maker**\n\n" +
"**1. T√≠tulo da Demanda**\n> " + titulo + "\n\n---\n\n" +
"**2. Descri√ß√£o do Projeto**\n- **Objetivo:** " + objetivo + "\n- **Onde ser√° usado:** " + onde + "\n- **P√∫blico-alvo:** " + publico + "\n\n---\n\n" +
"**3. Especifica√ß√µes T√©cnicas**\n" + blockDesign + blockVideo +
"---\n\n" +
"**4. Paleta de Cores e Identidade Visual**\n- **Guia:** " + paleta + "\n\n---\n\n" +
"**5. Refer√™ncias Visuais ou Audiovisuais**\n- " + (refs || "[Descreva ou adicione links]") + "\n- Links:\n" +
linksMd + "\n\n---\n\n" +
"**6. Texto ou Roteiro**\n" + ((activeTab !== 'video') ? "üñº **Para Design:**\n> \""+ textoDesign +"\"\n\n" : '') + ((activeTab !== 'design') ? "üé¨ **Para V√≠deo:**\n> \""+ textoVideo +"\"\n\n" : '') +
"---\n\n" +
"**7. Prazos**\n- **Primeira vers√£o:** " + prazo1 + "\n- **Vers√£o final:** " + prazo2 + "\n\n---\n\n" +
"**8. Contato para D√∫vidas**\n- **Respons√°vel:** " + resp + "\n- **Discord:** `" + discord + "`";
      }

      function generate(){
        if(!validate()) return;
        var out = $("out");
        if(out) out.textContent = md();
        showToast('Markdown gerado! ‚úÖ');
      }

      function copyOut(){
        var text = ($("out") && $("out").textContent) || '';
        if(!text){ showToast('Nada para copiar ainda.'); return; }
        if(navigator.clipboard && navigator.clipboard.writeText){
          navigator.clipboard.writeText(text).then(function(){
            var btn = $("copy");
            if(!btn) return;
            var old = btn.textContent; btn.textContent = "Copiado!"; btn.classList.add('good');
            setTimeout(function(){ btn.textContent = old; btn.classList.remove('good'); }, 1400);
          }).catch(function(){ fallbackCopy(text); });
        } else {
          fallbackCopy(text);
        }
      }

      function fallbackCopy(text){
        var ta = document.createElement('textarea');
        ta.value = text; document.body.appendChild(ta); ta.select();
        try { document.execCommand('copy'); showToast('Copiado! ‚úÖ'); }
        catch(e){ alert('N√£o foi poss√≠vel copiar. Selecione e copie manualmente.'); }
        document.body.removeChild(ta);
      }

      function clearAll(){
        document.querySelectorAll('input, textarea, select').forEach(function(el){ el.value=''; el.classList.remove('error'); });
        var out = $("out"); if(out) out.textContent = 'Preencha os campos e clique em ‚ÄúGerar Markdown‚Äù.';
      }

      function fillExample(){
        if($("titulo")) $("titulo").value = "Banner de Boas-Vindas para Tela de Login do Servidor";
        if($("objetivo")) $("objetivo").value = "Criar um banner visualmente impactante que transmita imers√£o e a√ß√£o no servidor.";
        if($("onde")) $("onde").value = "Tela de login do servidor Portland RP (FiveM)";
        if($("publico")) $("publico").value = "Jogadores (novos e veteranos)";

        if($("dimPreset")) $("dimPreset").value = "1920x1080px";
        if($("formatoPreset")) $("formatoPreset").value = "PNG";
        if($("dpiPreset")) $("dpiPreset").value = "72 DPI";
        if($("peso")) $("peso").value = "< 2MB";

        if($("vres")) $("vres").value = "1920x1080";
        if($("vformato")) $("vformato").value = "MP4";
        if($("vdur")) $("vdur").value = "30s";
        if($("vorient")) $("vorient").value = "Horizontal";
        if($("vfreq")) $("vfreq").value = "V√≠deo √∫nico";

        if($("paleta")) $("paleta").value = "Preto #000000, Branco #FFFFFF, Laranja vibrante #EA8E1E | Fonte: Montserrat | Estilo: clean com neon sutil";
        if($("refs")) $("refs").value = "Minimalista como menus de GTA V; est√©tica cinematogr√°fica de Cyberpunk 2077";
        if($("links")) $("links").value = "https://exemplo.com/hud\nhttps://exemplo.com/banner";

        if($("textoDesign")) $("textoDesign").value = "Bem-vindo ao Portland RP ‚Äì Sua hist√≥ria come√ßa aqui.";
        if($("textoVideo")) $("textoVideo").value = "V√≠deo institucional apresentando diferenciais do servidor, com cenas in-game e depoimentos.";

        var todayPlus3 = new Date(); todayPlus3.setDate(todayPlus3.getDate()+3);
        var todayPlus6 = new Date(); todayPlus6.setDate(todayPlus6.getDate()+6);
        if($("prazo1")) $("prazo1").value = todayPlus3.toISOString().slice(0,10);
        if($("prazo2")) $("prazo2").value = todayPlus6.toISOString().slice(0,10);

        if($("resp")) $("resp").value = "Diogo";
        if($("discord")) $("discord").value = "@Diogopbr";

        var tabAmbos = document.querySelector('[data-tab="ambos"]');
        if(tabAmbos) tabAmbos.click();

        generate();
      }

      // --- Testes automatizados ---
      function runTests(){
        var results = [];
        var assert = function(name, cond){ results.push((cond? '‚úÖ' : '‚ùå') + ' ' + name); return cond; };

        // Teste 1: lines() quebra linhas corretamente
        var L1 = lines("a\nb\n\nc\n");
        assert('lines remove vazios e quebra por \\n', L1.length === 3 && L1[0]==='a' && L1[2]==='c');

        // Teste 2: linksMd gera placeholder quando vazio
        var before = $("links") ? $("links").value : '';
        if($("links")) $("links").value = "";
        if($("titulo")) $("titulo").value = "T"; if($("objetivo")) $("objetivo").value = "O"; if($("onde")) $("onde").value = "W"; if($("publico")) $("publico").value = "P"; if($("prazo1")) $("prazo1").value = "2025-08-15"; if($("prazo2")) $("prazo2").value = "2025-08-20"; if($("resp")) $("resp").value = "R"; if($("discord")) $("discord").value = "@x";
        var tabDesign = document.querySelector('[data-tab="design"]'); if(tabDesign) tabDesign.click();
        if($("dimPreset")) $("dimPreset").value = "1920x1080px"; if($("formatoPreset")) $("formatoPreset").value = "PNG"; if($("dpiPreset")) $("dpiPreset").value = "72 DPI";
        var mdDesign = md();
        assert('MD cont√©m bloco de Design', mdDesign.indexOf('üé® **Para Design:**')>-1);
        assert('MD N√ÉO cont√©m bloco de V√≠deo', mdDesign.indexOf('üé¨ **Para V√≠deo:**')===-1);
        assert('MD placeholder de links aparece', mdDesign.indexOf('[link 1]()')>-1);

        // Teste 3: somente V√≠deo
        var tabVideo = document.querySelector('[data-tab="video"]'); if(tabVideo) tabVideo.click();
        if($("vres")) $("vres").value = "1920x1080"; if($("vformato")) $("vformato").value = "MP4"; if($("vorient")) $("vorient").value = "Horizontal"; if($("vdur")) $("vdur").value = "30s";
        var mdVideo = md();
        assert('MD cont√©m bloco de V√≠deo', mdVideo.indexOf('üé¨ **Para V√≠deo:**')>-1);
        assert('MD N√ÉO cont√©m bloco de Design', mdVideo.indexOf('üé® **Para Design:**')===-1);

        // Teste 4: Ambos
        var tabAmbos2 = document.querySelector('[data-tab="ambos"]'); if(tabAmbos2) tabAmbos2.click();
        var mdBoth = md();
        assert('MD cont√©m Design e V√≠deo quando Ambos', mdBoth.indexOf('üé® **Para Design:**')>-1 && mdBoth.indexOf('üé¨ **Para V√≠deo:**')>-1);

        // Restaurar
        if($("links")) $("links").value = before;

        var testout = $("testout"); if(testout) testout.textContent = results.join('\n');
        showToast('Testes executados');
      }

      // Liga bot√µes se existirem
      var btnGen=$("generate"), btnCopy=$("copy"), btnClear=$("clearAll"), btnFill=$("fillExample"), btnTest=$("runTests");
      if(btnGen) btnGen.addEventListener('click', generate);
      if(btnCopy) btnCopy.addEventListener('click', copyOut);
      if(btnClear) btnClear.addEventListener('click', clearAll);
      if(btnFill) btnFill.addEventListener('click', fillExample);
      if(btnTest) btnTest.addEventListener('click', runTests);

    } catch(err){
      console.error(err);
      var t = document.getElementById('testout');
      if(t) t.textContent = 'Erro em runtime: ' + (err && err.message ? err.message : err);
      var o = document.getElementById('out');
      if(o) o.textContent = 'Ocorreu um erro ao inicializar. Veja o console para detalhes.';
    }
  });
</script>
</body>
</html>
